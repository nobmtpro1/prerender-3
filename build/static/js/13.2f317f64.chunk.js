(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[13,14],{313:function(e,t,n){"use strict";t.a=n.p+"static/media/addToCart-white.47327068.svg"},321:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),i=n(1),s=n(8),l=n(18),r=n(6),o=n(0),d=n(24),u=n(2),j=n.p+"static/media/logo.d1cd0572.png",b=n(7),v=n(13),O=n(315),h=n.n(O),m=(n(339),n(136)),f=n(313),x=n(98),p=n(20),g=n(25),N=n(69),w=n(28),y=n(86);var k=function(e){var t,n=e.productItem,c=Object(p.c)((function(e){return e.productReducer})),a=Object(u.useRef)(null),l=Object(u.useState)({}),d=Object(r.a)(l,2),j=d[0],b=d[1],O=Object(p.b)(),h=(null===n||void 0===n?void 0:n.value)?null===n||void 0===n?void 0:n.value:n,m=Object(w.g)();return Object(u.useEffect)((function(){if(a&&a.current){var e,t=a.current.clientHeight,n=a.current.clientHeight;b(Object(i.a)(Object(i.a)({},null===(e=h.images[0])||void 0===e?void 0:e.url),{},{width:t,height:n}))}}),[h,a]),Object(o.jsxs)("div",{className:"product-item-box",children:[Object(o.jsxs)("div",{className:"favorite-box",children:[Object(o.jsx)("div",{}),h.fixed_rebate?Object(o.jsx)("span",{className:"sale-inf",style:{visibility:h.fixed_rebate>0?"visible":"hidden"},children:h.fixed_rebate>0?"-".concat(h.fixed_rebate,"%"):""}):""]}),Object(o.jsx)("div",{className:"img-product",ref:a,children:Object(o.jsx)(x.default,{data:j})}),Object(o.jsxs)("div",{className:"bot",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"info",children:[Object(o.jsx)("p",{className:"title-item",children:null===(t=h.brand)||void 0===t?void 0:t.name}),Object(o.jsx)("p",{className:"title-info",children:null===h||void 0===h?void 0:h.name})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:" info",children:Object(o.jsx)("span",{className:"money ".concat(n.sale?"sale-price":""),children:Object(v.l)(null===h||void 0===h?void 0:h.product_variants[0].price)})})}),Object(o.jsx)("button",{className:"btn-detail",onClick:function(){var e,t,n,c;n=h.handle,c=null===h||void 0===h||null===(e=h.brand_page)||void 0===e||null===(t=e.page_ptr)||void 0===t?void 0:t.handle,m.push("/brand/"+c+"/"+n)},children:"Discover"}),Object(o.jsxs)("button",{className:"btn-add",onClick:function(e){var t;e.stopPropagation();var n=(null===h||void 0===h?void 0:h.product_variants[0])||{},a={variant_id:null!==(t=null===n||void 0===n?void 0:n.variant_id)&&void 0!==t?t:"",quantity:1},l=null===c||void 0===c?void 0:c.lineItems.findIndex((function(e){return e.variant_id==a.variant_id})),r=Object(s.a)(null===c||void 0===c?void 0:c.lineItems);if(-1!=l){var o={variant_id:a.variant_id,quantity:(null===c||void 0===c?void 0:c.lineItems[l].quantity)+a.quantity};r[l]=o}else r.push(a);Object(y.a)(Object(i.a)(Object(i.a)({},h),{},{variant_id:n.variant_id,price:null===n||void 0===n?void 0:n.price,title:null===n||void 0===n?void 0:n.title,quantity:1})),O(g.a(r)),O(N.c(!0))},children:["ADD TO BAG",Object(o.jsx)("img",{src:f.a,alt:"ic-add-to-cart"})]})]})]})},_=n(42);function q(e){var t=e.productList,n=e.title,c=e.subTitle,a=Object(u.useState)(0),i=Object(r.a)(a,2),s=i[0],l=i[1],j=function(e){"next"!=e?"prev"!=e||l(s-1<=0?0:s-1):l(s+1>=t.length?t.length-1:s+1)};return Object(o.jsx)("section",{className:"blk-questionnaire-product",children:Object(o.jsxs)("div",{className:"container",children:[n?Object(o.jsx)("h3",{className:"title-block",children:n}):"",c?Object(o.jsx)("p",{className:"sub-title-block",children:c}):"",Object(o.jsx)("div",{className:"line-center"}),Object(o.jsx)("div",{className:"".concat(_.a?"":"row"," list-product"),children:_.a?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(h.a,{selected:s,fillParent:!1,mobileTouch:!0,buttons:!1,bullets:!0,className:"animation-slider",onTransitionEnd:function(e){l(e.currentIndex)},children:Object(d.map)(t,(function(e,t){return Object(o.jsx)("div",{className:"animated fasted fade-in",style:{marginBottom:16},children:Object(o.jsx)(k,{productItem:e})},t)}))}),Object(o.jsxs)("div",{className:"group-button",children:[Object(o.jsx)("button",{className:"next ".concat(s==t.length-1?"btn-end":""),onClick:function(){j("next")},children:Object(o.jsx)("span",{className:"material-icons",children:"navigate_next"})}),Object(o.jsx)("button",{className:"prev ".concat(0==s?"btn-end":""),onClick:function(){j("prev")},children:Object(o.jsx)("span",{className:"material-icons",children:"navigate_next"})})]})]}):Object(o.jsx)(o.Fragment,{children:Object(d.map)(t,(function(e,t){return Object(o.jsx)("div",{className:"col-lg-3 col-md-4 col-6 animated fasted fade-in",style:{marginBottom:16},children:Object(o.jsx)(k,{productItem:e})},t)}))})})]})})}var I=Object(u.memo)(q),S=n.p+"static/media/left-arrow.3c5c1c94.svg",T=n.p+"static/media/home.9bf8126f.svg",C=n(31);function E(e){var t,n=e.data,c=Object(u.useState)([]),O=Object(r.a)(c,2),f=O[0],x=O[1],p=Object(u.useState)([]),g=Object(r.a)(p,2),N=g[0],w=g[1],y=Object(u.useState)(0),k=Object(r.a)(y,2),q=k[0],E=k[1],K=Object(u.useState)({questionIndex:null,answerKey:null}),A=Object(r.a)(K,2),B=A[0],P=A[1],R=Object(u.useState)(!1),D=Object(r.a)(R,2),H=D[0],F=D[1],G=Object(u.useState)(!1),J=Object(r.a)(G,2),L=J[0],Q=J[1],z=Object(u.useState)([]),M=Object(r.a)(z,2),U=M[0],Z=M[1],V=Object(u.useState)(!1),W=Object(r.a)(V,2),X=W[0],Y=W[1],$=Object(u.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ce=function(){var e=Object(l.a)(a.a.mark((function e(){var t,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(d.isEmpty)(f)){e.next=11;break}return t={url:"".concat(b.p).concat(null===n||void 0===n?void 0:n.value),method:"GET",body:null},e.prev=2,e.next=5,Object(v.e)(t);case 5:(c=e.sent).length>0&&(x(c),w([].concat(Object(s.a)(N),[Object(i.a)({},c[0])]))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){if(X||U.length>0)return Z([]),w([Object(i.a)({},f[0])]),E(0),void Y(!1);if(q>0){var e=Object(s.a)(N);e.pop(),w(e)}E(0==q?0:q-1),Q(!0)},ie=function(){var e=Object(l.a)(a.a.mark((function e(){var t,n,c,i,s,l,r,o,d,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=N[N.length-1],r=l,(null===l||void 0===l?void 0:l.children)&&(null===l||void 0===l?void 0:l.children.length)>0&&(r=l.children.find((function(e){return e.data.parent_answer=="answer_".concat(B.answerKey)}))),o={questionnaire_id:null===(t=r)||void 0===t?void 0:t.id,collections:null===(n=r)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.collection,scents:null===(i=r)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.scent},d={url:"".concat(b.p),method:"POST",body:o},e.prev=5,e.next=8,Object(v.e)(d);case 8:u=e.sent,Z(u.products),F(!1),0==u.products.length&&Y(!0),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){ce()}),[]),Object(u.useEffect)((function(){H&&ie()}),[H]),Object(u.useEffect)((function(){!function(){if(null!=B.questionIndex){var e=N.find((function(e,t){return t==B.questionIndex}));if(!te&&e&&e.children){var t=e.children.find((function(e){return e.data.parent_answer=="answer_".concat(B.answerKey)}));if(t){if(L){var n=N.slice(0,B.questionIndex+1);w([].concat(Object(s.a)(n),[Object(i.a)({},t)])),E(n.length),Q(!1)}else w([].concat(Object(s.a)(N),[Object(i.a)({},t)])),E(N.length);P(Object(i.a)(Object(i.a)({},B),{},{questionIndex:null,answerKey:null}))}else F(!0)}else F(!0)}}()}),[B]),Object(o.jsxs)("div",{className:"site-questionnaire",style:{backgroundImage:"url('".concat(null===n||void 0===n||null===(t=n.background)||void 0===t?void 0:t.webp,"')"),backgroundSize:"cover"},children:[H?Object(o.jsx)(m.a,{}):"",Object(o.jsxs)("div",{className:"container ".concat(U.length>0?"opacity-none":""),children:[Object(o.jsxs)("button",{className:"btn-back",onClick:ae,children:[Object(o.jsx)("img",{className:"ic-back",src:S,alt:"ic-back"}),Object(o.jsx)("span",{children:X||U.length>0?"RESTART QUIZ":"BACK"})]}),Object(o.jsxs)(C.b,{className:"btn-home",to:"/",children:[Object(o.jsx)("img",{className:"ic-home",src:T,alt:"ic-home"}),Object(o.jsx)("br",{}),Object(o.jsx)("span",{children:"HOME"})]}),Object(o.jsx)("div",{className:"logo",children:Object(o.jsx)("img",{src:j,width:130,height:"auto",alt:"sundora-logo"})}),X?Object(o.jsx)("div",{className:"product-not-exists",children:Object(o.jsxs)("h2",{children:["There is no suitable product for you,"," ",Object(o.jsx)("span",{onClick:ae,children:"please try again"}),"."]})}):U.length>0?Object(o.jsx)(I,{productList:U,title:"Top products for you:",subTitle:"Based on your answers here it what we recommend"}):Object(o.jsxs)("div",{className:"question",children:[Object(o.jsxs)("h2",{className:"text-question-step",children:["Question ",q+1," / 6"]}),Object(o.jsx)(h.a,{selected:q,fillParent:!1,mobileTouch:!1,bullets:!1,className:"animation-slider",buttons:!1,children:N.map((function(e,t){return Object(o.jsxs)("div",{className:"detail-question",children:[Object(o.jsx)("h1",{className:"text-question-name",children:e.data.question}),Object(o.jsx)("div",{className:"line-center"}),Object(o.jsx)("div",{className:"row",style:{padding:_.a?20:13},children:[1,2,3,4].map((function(n){return Object(o.jsx)("button",{onClick:function(){!function(e,t){ne(5==e),P(Object(i.a)(Object(i.a)({},B),{},{questionIndex:e,answerKey:t}))}(t,n)},className:"".concat(_.a?"col-12":"col"," block-answer ").concat(B.answerKey==n?"block-answer-active":""," ").concat(""!=e.data["answer_".concat(n)]?"":"d-none"),children:Object(o.jsx)("p",{children:e.data["answer_".concat(n)]})},n)}))})]},t)}))}),Object(o.jsx)("div",{className:"group-dot",children:Array.from(Array(6).keys()).map((function(e,t){return Object(o.jsx)("button",{className:"btn-dot".concat(t<N.length?" btn-dot-active":""),onClick:function(){return function(e){if(e<N.length&&e!=q){if(q>0){var t=Object(s.a)(N);w(t.slice(0,e+1))}E(e),Q(!0)}}(t)}},t)}))})]})]})]})}t.default=Object(u.memo)(E)}}]);
//# sourceMappingURL=13.2f317f64.chunk.js.map